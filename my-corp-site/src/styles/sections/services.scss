@use "../abstracts/variables" as *;
@use "../abstracts/colors" as *;

.services {
    padding: 7.5rem 2.5rem;
    height: max-content;

    @media #{$lap-and-up} {
        height: 100dvh;
        height: 100vh;
        padding: 15rem 0;
        overflow-x: hidden;
        max-width: 100%;
    }

    &-slider {
        position: relative;
        width: 100%;

        @media #{$pocket} {
            height: max-content;
            // min-height: calc(800vh - 11rem);

            min-height: calc(calc((100vh - 14rem) * 8) + calc(7 * 1.5rem)); // np. 8 kart = 8 * cardHeight
        }

        @media #{$lap-and-up} {
            padding: 0 5rem;
            align-items: stretch;
        }

        @media #{$widescreen} {
            padding: 0 15rem;
        }
    }

    &-item {
        background-color: $white;
        border-radius: 2.5rem;
        padding: 2.5rem;
        text-align: left;
        justify-content: space-between;
        align-items: flex-start;
        gap: 3.5rem;
        overflow: hidden;

        @media #{$pocket} {
            position: sticky;
            top: 11.5rem;
            height: calc(100vh - 14rem);
            width: 100%;

            &:nth-of-type(1) {
                z-index: 2 !important;
            }
            &:nth-of-type(2) {
                z-index: 3 !important;
            }
            &:nth-of-type(3) {
                z-index: 4 !important;
            }
            &:nth-of-type(4) {
                z-index: 5 !important;
            }
            &:nth-of-type(5) {
                z-index: 6 !important;
            }
            &:nth-of-type(6) {
                z-index: 7 !important;
            }
            &:nth-of-type(7) {
                z-index: 8 !important;
            }
            &:nth-of-type(8) {
                z-index: 9 !important;
            }
        }

        @media #{$lap-and-up} {
            min-width: 27vw;
            height: 40rem;
        }

        h3 {
            @media #{$lap-and-up} {
                min-width: calc(27vw - 5rem);
                min-height: unset;
            }
        }

        & > *,
        & * {
            transition: 1s;
        }

        &.collapsed {
            align-items: center;
            min-width: unset;
            border-radius: 6rem;
            min-width: 9rem !important;

            h3 {
                @media #{$lap-and-up} {
                    min-height: 26.5rem;
                    min-width: unset;
                }
            }

            .services-item-asset,
            p.small {
                display: none;
                opacity: 0;
            }

            .f.f-col.f-g10 {
                flex: 1 0 auto;
                writing-mode: vertical-rl;
                text-orientation: mixed;
            }

            .f.f-jcsb {
                width: auto;
            }
        }

        // Paragraph opacity transition (only for opacity, not width)
        p.small {
            transition: opacity 0.3s ease; // Only animate opacity, not width
        }

        .f.f-col.f-g10 {
            transform: none;
            transform-origin: top left;
            position: relative;
        }

        .f.f-jcsb {
            width: 100%;
            align-items: flex-end;

            @media #{$pocket} {
                flex: 1 0 auto;
                align-items: flex-start;
                flex-direction: column-reverse;
            }
        }

        &-asset {
            aspect-ratio: 1/1;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-basis: 10rem;
            width: 10rem;
            max-width: 10rem;
            min-width: 10rem;
            height: 10rem;
            max-height: 10rem;
            min-height: 10rem;
            background-color: blue;
            border-radius: calc(2.5rem * 0.5);
        }
    }
}
